(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,58697,e=>{"use strict";function t(e){if(!e)return"-";let t=new Date(e);if(isNaN(t.getTime()))return"-";let a=String(t.getDate()).padStart(2,"0"),r=String(t.getMonth()+1).padStart(2,"0"),s=t.getFullYear();return`${a}/${r}/${s}`}e.s(["formatToDDMMYYYY",()=>t])},73987,e=>{"use strict";var t=e.i(71645);let a=new Map([["bold",t.createElement(t.Fragment,null,t.createElement("path",{d:"M168.49,199.51a12,12,0,0,1-17,17l-80-80a12,12,0,0,1,0-17l80-80a12,12,0,0,1,17,17L97,128Z"}))],["duotone",t.createElement(t.Fragment,null,t.createElement("path",{d:"M160,48V208L80,128Z",opacity:"0.2"}),t.createElement("path",{d:"M163.06,40.61a8,8,0,0,0-8.72,1.73l-80,80a8,8,0,0,0,0,11.32l80,80A8,8,0,0,0,168,208V48A8,8,0,0,0,163.06,40.61ZM152,188.69,91.31,128,152,67.31Z"}))],["fill",t.createElement(t.Fragment,null,t.createElement("path",{d:"M168,48V208a8,8,0,0,1-13.66,5.66l-80-80a8,8,0,0,1,0-11.32l80-80A8,8,0,0,1,168,48Z"}))],["light",t.createElement(t.Fragment,null,t.createElement("path",{d:"M164.24,203.76a6,6,0,1,1-8.48,8.48l-80-80a6,6,0,0,1,0-8.48l80-80a6,6,0,0,1,8.48,8.48L88.49,128Z"}))],["regular",t.createElement(t.Fragment,null,t.createElement("path",{d:"M165.66,202.34a8,8,0,0,1-11.32,11.32l-80-80a8,8,0,0,1,0-11.32l80-80a8,8,0,0,1,11.32,11.32L91.31,128Z"}))],["thin",t.createElement(t.Fragment,null,t.createElement("path",{d:"M162.83,205.17a4,4,0,0,1-5.66,5.66l-80-80a4,4,0,0,1,0-5.66l80-80a4,4,0,1,1,5.66,5.66L85.66,128Z"}))]]);e.s(["default",()=>a])},14444,e=>{"use strict";var t=e.i(71645),a=e.i(75108),r=e.i(73987);let s=t.forwardRef((e,s)=>t.createElement(a.default,{ref:s,...e,weights:r.default}));s.displayName="CaretLeftIcon",e.s(["CaretLeft",()=>s])},38163,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(75108);let s=new Map([["bold",a.createElement(a.Fragment,null,a.createElement("path",{d:"M214.67,68H204V40a12,12,0,0,0-12-12H64A12,12,0,0,0,52,40V68H41.33C25.16,68,12,80.56,12,96v80a12,12,0,0,0,12,12H52v28a12,12,0,0,0,12,12H192a12,12,0,0,0,12-12V188h28a12,12,0,0,0,12-12V96C244,80.56,230.84,68,214.67,68ZM76,52H180V68H76ZM180,204H76V172H180Zm40-40H204v-4a12,12,0,0,0-12-12H64a12,12,0,0,0-12,12v4H36V96c0-2.17,2.44-4,5.33-4H214.67c2.89,0,5.33,1.83,5.33,4Zm-16-44a16,16,0,1,1-16-16A16,16,0,0,1,204,120Z"}))],["duotone",a.createElement(a.Fragment,null,a.createElement("path",{d:"M232,96v80H192V152H64v24H24V96c0-8.84,7.76-16,17.33-16H214.67C224.24,80,232,87.16,232,96Z",opacity:"0.2"}),a.createElement("path",{d:"M214.67,72H200V40a8,8,0,0,0-8-8H64a8,8,0,0,0-8,8V72H41.33C27.36,72,16,82.77,16,96v80a8,8,0,0,0,8,8H56v32a8,8,0,0,0,8,8H192a8,8,0,0,0,8-8V184h32a8,8,0,0,0,8-8V96C240,82.77,228.64,72,214.67,72ZM72,48H184V72H72ZM184,208H72V160H184Zm40-40H200V152a8,8,0,0,0-8-8H64a8,8,0,0,0-8,8v16H32V96c0-4.41,4.19-8,9.33-8H214.67c5.14,0,9.33,3.59,9.33,8Zm-24-52a12,12,0,1,1-12-12A12,12,0,0,1,200,116Z"}))],["fill",a.createElement(a.Fragment,null,a.createElement("path",{d:"M240,96v80a8,8,0,0,1-8,8H200v32a8,8,0,0,1-8,8H64a8,8,0,0,1-8-8V184H24a8,8,0,0,1-8-8V96c0-13.23,11.36-24,25.33-24H56V40a8,8,0,0,1,8-8H192a8,8,0,0,1,8,8V72h14.67C228.64,72,240,82.77,240,96ZM72,72H184V48H72Zm112,88H72v48H184Zm16-44a12,12,0,1,0-12,12A12,12,0,0,0,200,116Z"}))],["light",a.createElement(a.Fragment,null,a.createElement("path",{d:"M214.67,74H198V40a6,6,0,0,0-6-6H64a6,6,0,0,0-6,6V74H41.33C28.47,74,18,83.87,18,96v80a6,6,0,0,0,6,6H58v34a6,6,0,0,0,6,6H192a6,6,0,0,0,6-6V182h34a6,6,0,0,0,6-6V96C238,83.87,227.53,74,214.67,74ZM70,46H186V74H70ZM186,210H70V158H186Zm40-40H198V152a6,6,0,0,0-6-6H64a6,6,0,0,0-6,6v18H30V96c0-5.51,5.08-10,11.33-10H214.67C220.92,86,226,90.49,226,96Zm-28-54a10,10,0,1,1-10-10A10,10,0,0,1,198,116Z"}))],["regular",a.createElement(a.Fragment,null,a.createElement("path",{d:"M214.67,72H200V40a8,8,0,0,0-8-8H64a8,8,0,0,0-8,8V72H41.33C27.36,72,16,82.77,16,96v80a8,8,0,0,0,8,8H56v32a8,8,0,0,0,8,8H192a8,8,0,0,0,8-8V184h32a8,8,0,0,0,8-8V96C240,82.77,228.64,72,214.67,72ZM72,48H184V72H72ZM184,208H72V160H184Zm40-40H200V152a8,8,0,0,0-8-8H64a8,8,0,0,0-8,8v16H32V96c0-4.41,4.19-8,9.33-8H214.67c5.14,0,9.33,3.59,9.33,8Zm-24-52a12,12,0,1,1-12-12A12,12,0,0,1,200,116Z"}))],["thin",a.createElement(a.Fragment,null,a.createElement("path",{d:"M214.67,76H196V40a4,4,0,0,0-4-4H64a4,4,0,0,0-4,4V76H41.33C29.57,76,20,85,20,96v80a4,4,0,0,0,4,4H60v36a4,4,0,0,0,4,4H192a4,4,0,0,0,4-4V180h36a4,4,0,0,0,4-4V96C236,85,226.43,76,214.67,76ZM68,44H188V76H68ZM188,212H68V156H188Zm40-40H196V152a4,4,0,0,0-4-4H64a4,4,0,0,0-4,4v20H28V96c0-6.62,6-12,13.33-12H214.67C222,84,228,89.38,228,96Zm-32-56a8,8,0,1,1-8-8A8,8,0,0,1,196,116Z"}))]]),l=a.forwardRef((e,t)=>a.createElement(r.default,{ref:t,...e,weights:s}));function n(){return(0,t.jsxs)("button",{onClick:()=>window.print(),className:"flex items-center gap-2 bg-primary text-white px-6 py-2 rounded-sm text-[10px] font-bold uppercase tracking-widest hover:bg-blue-700 transition-all shadow-sm",children:[(0,t.jsx)(l,{size:16,weight:"regular"}),"Print Letter"]})}l.displayName="PrinterIcon",e.s(["default",()=>n],38163)},52542,e=>{"use strict";var t=e.i(43476),a=e.i(90615),r=e.i(18566),s=e.i(22016),l=e.i(14444),n=e.i(58697),i=e.i(38163),c=e.i(57688),d=e.i(71645);function o(){let e=(0,r.useRouter)(),o=(0,r.useSearchParams)().get("id"),[m,p]=(0,d.useState)(!0),[x,h]=(0,d.useState)(null),[b,u]=(0,d.useState)(null);if((0,d.useEffect)(()=>{o?(async()=>{let t=(0,a.createClient)();try{let{data:{user:a}}=await t.auth.getUser();if(!a)return void e.push("/portal/account/login");let{data:r,error:s}=await t.from("applications").select(`
                        *,
                        course:Course(*),
                        offer:admission_offers(*, payments:tuition_payments(*))
                    `).eq("id",o).eq("user_id",a.id).single();if(s||!r){h(null),p(!1);return}let l=Array.isArray(r.offer)?r.offer[0]:r.offer;if(l&&(!l.payments||0===l.payments.length)){let{data:e}=await t.from("tuition_payments").select("*").eq("offer_id",l.id).order("created_at",{ascending:!1});e&&e.length>0&&(l.payments=e)}h(r);let{data:n}=await t.from("admissions").select("*").eq("user_id",a.id).eq("program",r.course?.title).maybeSingle();n&&u(n)}catch(e){console.error("Error fetching receipt data:",e)}finally{p(!1)}})():e.push("/portal/dashboard")},[o,e]),m)return(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 border-4 border-neutral-200 border-t-black rounded-full animate-spin"}),(0,t.jsx)("p",{className:"text-sm font-medium uppercase tracking-widest text-neutral-400",children:"Loading Receipt..."})]})});if(!x)return(0,r.notFound)();let f=Array.isArray(x?.offer)?x.offer[0]:x?.offer,g=f?.payments?.[0];if(!g||"ENROLLED"!==x.status&&"PAYMENT_SUBMITTED"!==x.status)return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[60vh] gap-4",children:[(0,t.jsx)("p",{className:"text-xl font-bold text-neutral-900 uppercase tracking-tight",children:"Receipt Not Available"}),(0,t.jsx)("p",{className:"text-sm text-neutral-500 max-w-md text-center",children:"Your payment receipt is not available yet. This may be because the payment is still being processed."}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-black text-white text-[10px] font-bold uppercase tracking-widest rounded-sm",children:"Retry"}),(0,t.jsx)(s.default,{href:"/portal/dashboard",className:"px-6 py-2 border border-neutral-200 text-[10px] font-bold uppercase tracking-widest rounded-sm",children:"Dashboard"})]})]});if("PAYMENT_SUBMITTED"===x.status)return(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[60vh] font-rubik px-4",children:(0,t.jsxs)("div",{className:"max-w-md w-full bg-white border border-neutral-200 p-8 rounded-sm text-center shadow-sm",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-amber-50 text-amber-600 rounded-full flex items-center justify-center mx-auto mb-4 border border-amber-100",children:(0,t.jsx)(d.Suspense,{children:(0,t.jsx)("div",{className:"w-5 h-5 border-2 border-amber-600 border-t-transparent rounded-full animate-spin"})})}),(0,t.jsx)("h2",{className:"text-lg font-black uppercase tracking-tight text-neutral-900 mb-2",children:"Payment Under Review"}),(0,t.jsxs)("p",{className:"text-xs text-neutral-500 font-medium leading-relaxed mb-8",children:["Your transaction has been recorded (Ref: ",(0,t.jsx)("span",{className:"font-mono text-black",children:g?.transaction_reference||"N/A"}),").",(0,t.jsx)("br",{}),"The official receipt will be available here once our finance team confirms the funds."]}),(0,t.jsx)(s.default,{href:"/portal/dashboard",className:"block w-full bg-black text-white px-6 py-3 rounded-sm text-[10px] font-black uppercase tracking-widest hover:bg-neutral-800 transition-all border border-black",children:"Return to Dashboard"})]})});let j=Math.max(1,Math.round((g?.amount||0)/(f?.tuition_fee||1))),v=(g?.amount||0)<(f?.tuition_fee||1),N=b?.intake||"Autumn 2026",k=b?.academic_year||"2026/2027",w="PAYMENT_SUBMITTED"===x.status;return(0,t.jsxs)("div",{className:"min-h-screen bg-neutral-100/50 py-6 md:py-12 px-4 sm:px-6 font-rubik",children:[(0,t.jsxs)("div",{className:"max-w-[210mm] mx-auto mb-8 flex items-center justify-between print:hidden",children:[(0,t.jsxs)(s.default,{href:"/portal/dashboard",className:"flex items-center gap-2 text-[10px] font-bold uppercase tracking-widest text-black hover:text-black transition-colors",children:[(0,t.jsx)(l.CaretLeft,{size:14,weight:"bold"}),"Back to Dashboard"]}),(0,t.jsx)(i.default,{})]}),(0,t.jsxs)("div",{className:"w-full max-w-[210mm] mx-auto bg-white print:shadow-none p-6 md:p-8 print:border-0 relative overflow-hidden",children:[w&&(0,t.jsx)("div",{className:"absolute top-12 right-12 opacity-10 pointer-events-none z-0 border-[8px] border-black p-4 rotate-[-15deg]",children:(0,t.jsx)("span",{className:"text-6xl font-black uppercase tracking-widest text-black",children:"PENDING"})}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row print-header-row justify-between items-start mb-8 gap-4 relative z-10 border-b-2 border-black pb-6 p-1",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"relative w-40 h-10",children:(0,t.jsx)(c.default,{src:"/logo-kestora.png",alt:"Kestora College",fill:!0,style:{objectFit:"contain",objectPosition:"left center"}})}),(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)("div",{className:"text-[12px] font-black uppercase tracking-[0.05em] text-black",children:"Kestora College"}),(0,t.jsxs)("div",{className:"text-[9px] text-black font-medium leading-relaxed max-w-[200px]",children:["Kestora College – Helsinki Campus, Pohjoisesplanadi 51, 00150 Helsinki, Finland",(0,t.jsx)("br",{}),"financial.services@kestora.online"]})]})]}),(0,t.jsxs)("div",{className:"text-right flex flex-col items-end print-right mt-4 sm:mt-0",children:[(0,t.jsx)("div",{className:"text-2xl font-black text-black uppercase tracking-tighter leading-none mb-1",children:"Receipt"}),(0,t.jsxs)("div",{className:"flex flex-col items-end gap-0.5",children:[(0,t.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest text-black",children:"Transaction ID"}),(0,t.jsx)("span",{className:"text-xs font-mono font-bold text-black border-r-4 border-black pr-3",children:g?.transaction_reference||"N/A"})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-8 mb-8 relative z-10",children:[(0,t.jsxs)("div",{className:"md:col-span-7 space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-[9px] font-black text-black uppercase tracking-widest mb-2 border-b border-black pb-0.5",children:"Received From (Payer)"}),(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsxs)("div",{className:"text-lg font-black text-black uppercase tracking-tight",children:[x.personal_info?.firstName," ",x.personal_info?.lastName]}),(0,t.jsxs)("div",{className:"text-sm text-black font-medium",children:[x.contact_details?.addressLine1||x.contact_details?.address,(0,t.jsx)("br",{}),x.contact_details?.city,", ",x.contact_details?.country]}),(0,t.jsxs)("div",{className:"text-[10px] font-bold text-black border border-black inline-block px-2 py-0.5 mt-2",children:["PASSPORT No: ",x.personal_info?.passportNumber||"N/A"]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-[10px] font-black text-black uppercase tracking-widest mb-3 border-b border-black pb-1",children:"Payment Method & Status"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-[9px] font-bold text-black uppercase mb-0.5",children:"Method"}),(0,t.jsx)("div",{className:"text-xs font-bold text-black uppercase",children:(e=>{if(!e)return"N/A";let t={upi:"UPI",in_bank:"Net Banking",sepa:"SEPA Transfer",nordea:"Nordea Online",ng_bank:"Bank Transfer",flutterwave_uae:"Flutterwave",ach:"ACH Direct Debit",wire:"International Wire",credit_card:"Credit / Debit Card",paygowire:"Paygowire"}[e.toLowerCase()]||e.replace(/_/g," ");return`Paygowire - ${t}`})(g.payment_method)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-[9px] font-bold text-black uppercase mb-0.5",children:"Status"}),w?(0,t.jsxs)("div",{className:"inline-flex items-center gap-1.5 text-xs font-black text-amber-600 uppercase",children:[(0,t.jsx)("div",{className:"w-1.5 h-1.5 bg-amber-600 rounded-full animate-pulse"}),"Pending Verification"]}):(0,t.jsxs)("div",{className:"inline-flex items-center gap-1.5 text-xs font-black text-emerald-600 uppercase",children:[(0,t.jsx)("div",{className:"w-1.5 h-1.5 bg-emerald-600 rounded-full"}),"Verified & Completed"]})]})]})]})]}),(0,t.jsx)("div",{className:"md:col-span-5",children:(0,t.jsxs)("div",{className:"bg-white p-4 space-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-0.5 pr-4",children:[(0,t.jsx)("span",{className:"text-[8px] font-bold text-black uppercase",children:"Amount Paid (EUR)"}),(0,t.jsxs)("span",{className:"text-2xl font-black text-black leading-none",children:["€ ",g?.amount?.toLocaleString()||"0"]})]}),(0,t.jsxs)("div",{className:"space-y-2 pt-4 border-t border-black",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center text-[9px] font-bold",children:[(0,t.jsx)("span",{className:"text-black uppercase tracking-wider",children:"Date Received"}),(0,t.jsx)("span",{className:"text-black",children:(0,n.formatToDDMMYYYY)(g?.created_at)})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center text-[9px] font-bold",children:[(0,t.jsx)("span",{className:"text-black uppercase tracking-wider",children:"Currency"}),(0,t.jsx)("span",{className:"text-black",children:f.currency||"EUR"})]})]})]})})]}),(0,t.jsxs)("div",{className:"relative z-10 mb-8",children:[(0,t.jsx)("div",{className:"text-[10px] font-black text-black uppercase tracking-widest mb-3 border-b border-black pb-1",children:"Payment Breakdown"}),(0,t.jsxs)("table",{className:"w-full text-sm border-collapse",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"text-[9px] font-black uppercase tracking-widest text-black border-b-2 border-black",children:[(0,t.jsx)("th",{className:"text-left py-2 px-2",children:"Description"}),(0,t.jsx)("th",{className:"text-center py-2 px-2",children:"Duration"}),(0,t.jsx)("th",{className:"text-right py-2 px-2",children:"Amount"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-black",children:(0,t.jsxs)("tr",{children:[(0,t.jsxs)("td",{className:"py-4 px-2",children:[(0,t.jsxs)("div",{className:"font-bold text-black uppercase tracking-tight",children:[v?"Tuition Deposit":"Tuition Fees"," - ",x.course?.title]}),(0,t.jsxs)("div",{className:"text-[10px] text-black mt-0.5",children:["Intake: ",N," | Academic Year ",k]})]}),(0,t.jsx)("td",{className:"py-4 px-2 text-center align-top",children:(0,t.jsx)("div",{className:"text-xs font-bold text-black",children:v?"Deposit (1st Year)":`${j} ${1===j?"Year":"Years"}`})}),(0,t.jsx)("td",{className:"py-4 px-2 text-right align-top whitespace-nowrap",children:(0,t.jsxs)("div",{className:"font-bold text-black text-sm md:text-base",children:["€ ",g.amount.toLocaleString()]})})]})}),(0,t.jsx)("tfoot",{children:(0,t.jsxs)("tr",{className:"border-t-2 border-black",children:[(0,t.jsx)("td",{colSpan:2,className:"py-4 px-2 text-[10px] md:text-[11px] font-black uppercase tracking-widest text-right",children:"Total Net Paid"}),(0,t.jsxs)("td",{className:"py-4 px-2 text-right text-base md:text-xl font-black text-black whitespace-nowrap",children:["€ ",g?.amount?.toLocaleString()||"0"]})]})})]})]}),(0,t.jsx)("div",{className:"relative z-10 mt-auto pt-8",children:(0,t.jsx)("p",{className:"text-[8px] text-black uppercase tracking-widest leading-relaxed text-center font-medium",children:"This document serves as an official proof of payment for the specified student and program. It is electronically generated and verified through the Kestora SIS Gateway."})})]}),(0,t.jsx)("style",{dangerouslySetInnerHTML:{__html:`
                @media print {
                    @page { margin: 15mm; size: A4; }
                    body { background: white !important; padding: 0 !important; margin: 0 !important; }
                    header, nav, footer,
                    [data-theme="portal"] > header,
                    [data-theme="portal"] > footer,
                    .print\\:hidden { display: none !important; }
                    [data-theme="portal"] { min-height: 0 !important; }
                    [data-theme="portal"] > main { padding: 0 !important; margin: 0 !important; max-width: 100% !important; }
                    .min-h-screen { min-height: 0 !important; background: white !important; padding: 0 !important; }
                    .min-h-\\[297mm\\] { min-height: 0 !important; }
                    .max-w-\\[210mm\\] { max-width: 100% !important; margin: 0 !important; padding: 15mm 0 !important; }
                    .shadow-xl, .shadow-sm, .print\\:shadow-none { box-shadow: none !important; }
                    .print\\:border-0 { border: none !important; }
                    .print-header-row { display: flex !important; flex-direction: row !important; justify-content: space-between !important; }
                    .print-right { text-align: right !important; align-items: flex-end !important; }
                    * { color: black !important; -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }
                    a { text-decoration: none !important; }
                }
            `}})]})}function m(){return(0,t.jsx)(d.Suspense,{fallback:(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 border-4 border-neutral-200 border-t-black rounded-full animate-spin"}),(0,t.jsx)("p",{className:"text-sm font-medium uppercase tracking-widest text-neutral-400",children:"Loading Receipt..."})]})}),children:(0,t.jsx)(o,{})})}e.s(["default",()=>m])}]);