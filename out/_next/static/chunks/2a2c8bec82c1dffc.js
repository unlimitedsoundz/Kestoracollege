(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,27269,e=>{"use strict";var a=e.i(71645);let t=new Map([["bold",a.createElement(a.Fragment,null,a.createElement("path",{d:"M236,128a108,108,0,0,1-216,0c0-42.52,24.73-81.34,63-98.9A12,12,0,1,1,93,50.91C63.24,64.57,44,94.83,44,128a84,84,0,0,0,168,0c0-33.17-19.24-63.43-49-77.09A12,12,0,1,1,173,29.1C211.27,46.66,236,85.48,236,128Z"}))],["duotone",a.createElement(a.Fragment,null,a.createElement("path",{d:"M224,128a96,96,0,1,1-96-96A96,96,0,0,1,224,128Z",opacity:"0.2"}),a.createElement("path",{d:"M232,128a104,104,0,0,1-208,0c0-41,23.81-78.36,60.66-95.27a8,8,0,0,1,6.68,14.54C60.15,61.59,40,93.27,40,128a88,88,0,0,0,176,0c0-34.73-20.15-66.41-51.34-80.73a8,8,0,0,1,6.68-14.54C208.19,49.64,232,87,232,128Z"}))],["fill",a.createElement(a.Fragment,null,a.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,176A72,72,0,0,1,92,65.64a8,8,0,0,1,8,13.85,56,56,0,1,0,56,0,8,8,0,0,1,8-13.85A72,72,0,0,1,128,200Z"}))],["light",a.createElement(a.Fragment,null,a.createElement("path",{d:"M230,128a102,102,0,0,1-204,0c0-40.18,23.35-76.86,59.5-93.45a6,6,0,0,1,5,10.9C58.61,60.09,38,92.49,38,128a90,90,0,0,0,180,0c0-35.51-20.61-67.91-52.5-82.55a6,6,0,0,1,5-10.9C206.65,51.14,230,87.82,230,128Z"}))],["regular",a.createElement(a.Fragment,null,a.createElement("path",{d:"M232,128a104,104,0,0,1-208,0c0-41,23.81-78.36,60.66-95.27a8,8,0,0,1,6.68,14.54C60.15,61.59,40,93.27,40,128a88,88,0,0,0,176,0c0-34.73-20.15-66.41-51.34-80.73a8,8,0,0,1,6.68-14.54C208.19,49.64,232,87,232,128Z"}))],["thin",a.createElement(a.Fragment,null,a.createElement("path",{d:"M228,128a100,100,0,0,1-200,0c0-39.4,22.9-75.37,58.33-91.63a4,4,0,1,1,3.34,7.27C57.07,58.6,36,91.71,36,128a92,92,0,0,0,184,0c0-36.29-21.07-69.4-53.67-84.36a4,4,0,1,1,3.34-7.27C205.1,52.63,228,88.6,228,128Z"}))]]);e.s(["default",()=>t])},87583,e=>{"use strict";var a=e.i(71645),t=e.i(69464),l=e.i(27269);let r=a.forwardRef((e,r)=>a.createElement(t.default,{ref:r,...e,weights:l.default}));r.displayName="CircleNotchIcon",e.s(["CircleNotch",()=>r])},73987,e=>{"use strict";var a=e.i(71645);let t=new Map([["bold",a.createElement(a.Fragment,null,a.createElement("path",{d:"M168.49,199.51a12,12,0,0,1-17,17l-80-80a12,12,0,0,1,0-17l80-80a12,12,0,0,1,17,17L97,128Z"}))],["duotone",a.createElement(a.Fragment,null,a.createElement("path",{d:"M160,48V208L80,128Z",opacity:"0.2"}),a.createElement("path",{d:"M163.06,40.61a8,8,0,0,0-8.72,1.73l-80,80a8,8,0,0,0,0,11.32l80,80A8,8,0,0,0,168,208V48A8,8,0,0,0,163.06,40.61ZM152,188.69,91.31,128,152,67.31Z"}))],["fill",a.createElement(a.Fragment,null,a.createElement("path",{d:"M168,48V208a8,8,0,0,1-13.66,5.66l-80-80a8,8,0,0,1,0-11.32l80-80A8,8,0,0,1,168,48Z"}))],["light",a.createElement(a.Fragment,null,a.createElement("path",{d:"M164.24,203.76a6,6,0,1,1-8.48,8.48l-80-80a6,6,0,0,1,0-8.48l80-80a6,6,0,0,1,8.48,8.48L88.49,128Z"}))],["regular",a.createElement(a.Fragment,null,a.createElement("path",{d:"M165.66,202.34a8,8,0,0,1-11.32,11.32l-80-80a8,8,0,0,1,0-11.32l80-80a8,8,0,0,1,11.32,11.32L91.31,128Z"}))],["thin",a.createElement(a.Fragment,null,a.createElement("path",{d:"M162.83,205.17a4,4,0,0,1-5.66,5.66l-80-80a4,4,0,0,1,0-5.66l80-80a4,4,0,1,1,5.66,5.66L85.66,128Z"}))]]);e.s(["default",()=>t])},90961,e=>{"use strict";var a=e.i(71645),t=e.i(69464),l=e.i(73987);let r=a.forwardRef((e,r)=>a.createElement(t.default,{ref:r,...e,weights:l.default}));r.displayName="CaretLeftIcon",e.s(["CaretLeft",()=>r])},7955,e=>{"use strict";var a=e.i(71645);let t=new Map([["bold",a.createElement(a.Fragment,null,a.createElement("path",{d:"M222.14,69.17,186.83,33.86A19.86,19.86,0,0,0,172.69,28H48A20,20,0,0,0,28,48V208a20,20,0,0,0,20,20H208a20,20,0,0,0,20-20V83.31A19.86,19.86,0,0,0,222.14,69.17ZM164,204H92V160h72Zm40,0H188V156a20,20,0,0,0-20-20H88a20,20,0,0,0-20,20v48H52V52H171l33,33ZM164,84a12,12,0,0,1-12,12H96a12,12,0,0,1,0-24h56A12,12,0,0,1,164,84Z"}))],["duotone",a.createElement(a.Fragment,null,a.createElement("path",{d:"M216,83.31V208a8,8,0,0,1-8,8H176V152a8,8,0,0,0-8-8H88a8,8,0,0,0-8,8v64H48a8,8,0,0,1-8-8V48a8,8,0,0,1,8-8H172.69a8,8,0,0,1,5.65,2.34l35.32,35.32A8,8,0,0,1,216,83.31Z",opacity:"0.2"}),a.createElement("path",{d:"M219.31,72,184,36.69A15.86,15.86,0,0,0,172.69,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V83.31A15.86,15.86,0,0,0,219.31,72ZM168,208H88V152h80Zm40,0H184V152a16,16,0,0,0-16-16H88a16,16,0,0,0-16,16v56H48V48H172.69L208,83.31ZM160,72a8,8,0,0,1-8,8H96a8,8,0,0,1,0-16h56A8,8,0,0,1,160,72Z"}))],["fill",a.createElement(a.Fragment,null,a.createElement("path",{d:"M219.31,72,184,36.69A15.86,15.86,0,0,0,172.69,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V83.31A15.86,15.86,0,0,0,219.31,72ZM208,208H184V152a16,16,0,0,0-16-16H88a16,16,0,0,0-16,16v56H48V48H172.69L208,83.31ZM160,72a8,8,0,0,1-8,8H96a8,8,0,0,1,0-16h56A8,8,0,0,1,160,72Z"}))],["light",a.createElement(a.Fragment,null,a.createElement("path",{d:"M217.9,73.42,182.58,38.1a13.9,13.9,0,0,0-9.89-4.1H48A14,14,0,0,0,34,48V208a14,14,0,0,0,14,14H208a14,14,0,0,0,14-14V83.31A13.9,13.9,0,0,0,217.9,73.42ZM170,210H86V152a2,2,0,0,1,2-2h80a2,2,0,0,1,2,2Zm40-2a2,2,0,0,1-2,2H182V152a14,14,0,0,0-14-14H88a14,14,0,0,0-14,14v58H48a2,2,0,0,1-2-2V48a2,2,0,0,1,2-2H172.69a2,2,0,0,1,1.41.58L209.42,81.9a2,2,0,0,1,.58,1.41ZM158,72a6,6,0,0,1-6,6H96a6,6,0,0,1,0-12h56A6,6,0,0,1,158,72Z"}))],["regular",a.createElement(a.Fragment,null,a.createElement("path",{d:"M219.31,72,184,36.69A15.86,15.86,0,0,0,172.69,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V83.31A15.86,15.86,0,0,0,219.31,72ZM168,208H88V152h80Zm40,0H184V152a16,16,0,0,0-16-16H88a16,16,0,0,0-16,16v56H48V48H172.69L208,83.31ZM160,72a8,8,0,0,1-8,8H96a8,8,0,0,1,0-16h56A8,8,0,0,1,160,72Z"}))],["thin",a.createElement(a.Fragment,null,a.createElement("path",{d:"M216.49,74.83,181.17,39.51A11.93,11.93,0,0,0,172.69,36H48A12,12,0,0,0,36,48V208a12,12,0,0,0,12,12H208a12,12,0,0,0,12-12V83.31A11.93,11.93,0,0,0,216.49,74.83ZM172,212H84V152a4,4,0,0,1,4-4h80a4,4,0,0,1,4,4Zm40-4a4,4,0,0,1-4,4H180V152a12,12,0,0,0-12-12H88a12,12,0,0,0-12,12v60H48a4,4,0,0,1-4-4V48a4,4,0,0,1,4-4H172.69a4,4,0,0,1,2.82,1.17l35.32,35.32A4,4,0,0,1,212,83.31ZM156,72a4,4,0,0,1-4,4H96a4,4,0,0,1,0-8h56A4,4,0,0,1,156,72Z"}))]]);e.s(["default",()=>t])},25959,e=>{"use strict";var a=e.i(71645),t=e.i(75108),l=e.i(7955);let r=a.forwardRef((e,r)=>a.createElement(t.default,{ref:r,...e,weights:l.default}));r.displayName="FloppyDiskIcon",e.s(["FloppyDisk",()=>r])},41401,e=>{"use strict";async function a(e){if(!e||0===e.size)return null;let a=new FormData;a.append("file",e);try{let e=await fetch("/upload.php",{method:"POST",body:a});if(!e.ok)throw Error(`Upload failed with status: ${e.status}`);let t=await e.json();if(t.success&&t.url)return t.url;throw Error(t.error||"Upload failed")}catch(e){throw console.error("Hosting Upload Error:",e),e}}e.s(["uploadToHosting",()=>a])},51590,e=>{"use strict";var a=e.i(71645);let t=new Map([["bold",a.createElement(a.Fragment,null,a.createElement("path",{d:"M228,144v64a12,12,0,0,1-12,12H40a12,12,0,0,1-12-12V144a12,12,0,0,1,24,0v52H204V144a12,12,0,0,1,24,0ZM96.49,80.49,116,61v83a12,12,0,0,0,24,0V61l19.51,19.52a12,12,0,1,0,17-17l-40-40a12,12,0,0,0-17,0l-40,40a12,12,0,1,0,17,17Z"}))],["duotone",a.createElement(a.Fragment,null,a.createElement("path",{d:"M216,48V208H40V48A16,16,0,0,1,56,32H200A16,16,0,0,1,216,48Z",opacity:"0.2"}),a.createElement("path",{d:"M224,144v64a8,8,0,0,1-8,8H40a8,8,0,0,1-8-8V144a8,8,0,0,1,16,0v56H208V144a8,8,0,0,1,16,0ZM93.66,77.66,120,51.31V144a8,8,0,0,0,16,0V51.31l26.34,26.35a8,8,0,0,0,11.32-11.32l-40-40a8,8,0,0,0-11.32,0l-40,40A8,8,0,0,0,93.66,77.66Z"}))],["fill",a.createElement(a.Fragment,null,a.createElement("path",{d:"M224,144v64a8,8,0,0,1-8,8H40a8,8,0,0,1-8-8V144a8,8,0,0,1,16,0v56H208V144a8,8,0,0,1,16,0ZM88,80h32v64a8,8,0,0,0,16,0V80h32a8,8,0,0,0,5.66-13.66l-40-40a8,8,0,0,0-11.32,0l-40,40A8,8,0,0,0,88,80Z"}))],["light",a.createElement(a.Fragment,null,a.createElement("path",{d:"M222,144v64a6,6,0,0,1-6,6H40a6,6,0,0,1-6-6V144a6,6,0,0,1,12,0v58H210V144a6,6,0,0,1,12,0ZM92.24,76.24,122,46.49V144a6,6,0,0,0,12,0V46.49l29.76,29.75a6,6,0,0,0,8.48-8.48l-40-40a6,6,0,0,0-8.48,0l-40,40a6,6,0,0,0,8.48,8.48Z"}))],["regular",a.createElement(a.Fragment,null,a.createElement("path",{d:"M224,144v64a8,8,0,0,1-8,8H40a8,8,0,0,1-8-8V144a8,8,0,0,1,16,0v56H208V144a8,8,0,0,1,16,0ZM93.66,77.66,120,51.31V144a8,8,0,0,0,16,0V51.31l26.34,26.35a8,8,0,0,0,11.32-11.32l-40-40a8,8,0,0,0-11.32,0l-40,40A8,8,0,0,0,93.66,77.66Z"}))],["thin",a.createElement(a.Fragment,null,a.createElement("path",{d:"M220,144v64a4,4,0,0,1-4,4H40a4,4,0,0,1-4-4V144a4,4,0,0,1,8,0v60H212V144a4,4,0,0,1,8,0ZM90.83,74.83,124,41.66V144a4,4,0,0,0,8,0V41.66l33.17,33.17a4,4,0,1,0,5.66-5.66l-40-40a4,4,0,0,0-5.66,0l-40,40a4,4,0,0,0,5.66,5.66Z"}))]]);e.s(["default",()=>t])},59069,e=>{"use strict";var a=e.i(71645),t=e.i(75108),l=e.i(51590);let r=a.forwardRef((e,r)=>a.createElement(t.default,{ref:r,...e,weights:l.default}));r.displayName="UploadSimpleIcon",e.s(["UploadSimple",()=>r])},80544,e=>{"use strict";var a=e.i(43476),t=e.i(90615),l=e.i(71645),r=e.i(25959),n=e.i(59069),s=e.i(57688),i=e.i(41401);function c({department:e,schools:c,facultyMembers:o}){let[d,m]=(0,l.useState)(!1),[u,p]=(0,l.useState)(e.imageUrl),h=async a=>{a.preventDefault(),m(!0);let l=(0,t.createClient)();try{let t=new FormData(a.currentTarget),r={name:t.get("name"),slug:t.get("slug"),description:t.get("description"),schoolId:t.get("schoolId"),headOfDepartmentId:t.get("headOfDepartmentId")||null,updatedAt:new Date().toISOString()},n=t.get("image");if(n&&n.size>0){console.log("--- Starting image upload to hosting ---");try{let e=await (0,i.uploadToHosting)(n);e?(console.log("✅ Image upload successful:",e),r.imageUrl=e):console.warn("⚠️ Image upload returned no URL")}catch(e){console.error("❌ Hosting upload error:",e),alert("Image upload failed, but attempting to save other changes.")}}console.log("--- Updating Department in Supabase ---",r);let{error:s,data:c}=await l.from("Department").update(r).eq("id",e.id).select();if(s)throw console.error("❌ Supabase update error:",s),s;console.log("✅ Department updated successfully:",c),setTimeout(()=>{window.location.href="/admin/departments"},500)}catch(e){console.error("Error saving department:",e),alert(e.message||"Error saving department. Please try again.")}finally{m(!1)}};return(0,a.jsxs)("form",{onSubmit:h,className:"space-y-8 bg-white p-8 border border-neutral-100 shadow-sm",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold uppercase tracking-widest text-neutral-400 mb-2",children:"Department Name"}),(0,a.jsx)("input",{type:"text",name:"name",defaultValue:e.name,className:"w-full p-4 border border-neutral-200 focus:outline-none focus:border-black transition-colors",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold uppercase tracking-widest text-neutral-400 mb-2",children:"Slug (URL path)"}),(0,a.jsx)("input",{type:"text",name:"slug",defaultValue:e.slug,className:"w-full p-4 border border-neutral-200 focus:outline-none focus:border-black transition-colors",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold uppercase tracking-widest text-neutral-400 mb-2",children:"School"}),(0,a.jsx)("select",{name:"schoolId",defaultValue:e.schoolId,className:"w-full p-4 border border-neutral-200 focus:outline-none focus:border-black transition-colors appearance-none bg-white",required:!0,children:c.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold uppercase tracking-widest text-neutral-400 mb-2",children:"Head of Department"}),(0,a.jsxs)("select",{name:"headOfDepartmentId",defaultValue:e.headOfDepartmentId||"",className:"w-full p-4 border border-neutral-200 focus:outline-none focus:border-black transition-colors appearance-none bg-white",children:[(0,a.jsx)("option",{value:"",children:"To be appointed"}),o.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," (",e.role,")"]},e.id))]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold uppercase tracking-widest text-neutral-400 mb-2",children:"Featured Image"}),(0,a.jsxs)("div",{className:"border-2 border-dashed border-neutral-200 p-8 text-center space-y-4 relative min-h-[200px] flex items-center justify-center",children:[u?(0,a.jsxs)("div",{className:"aspect-[3/2] w-full relative group",children:[(0,a.jsx)(s.default,{src:u,alt:"Preview",fill:!0,unoptimized:!0,className:"object-cover"}),(0,a.jsx)("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:(0,a.jsx)("p",{className:"text-white text-sm font-bold",children:"Change Image"})})]}):(0,a.jsxs)("div",{className:"py-12",children:[(0,a.jsx)(n.UploadSimple,{className:"mx-auto mb-4 text-neutral-400",size:48,weight:"regular"}),(0,a.jsx)("p",{className:"text-neutral-500",children:"Click to upload or drag and drop"}),(0,a.jsx)("p",{className:"text-xs text-neutral-400",children:"Recommended: 1200x800px (3:2 ratio)"})]}),(0,a.jsx)("input",{type:"file",name:"image",onChange:e=>{let a=e.target.files?.[0];if(a){let e=new FileReader;e.onloadend=()=>{p(e.result)},e.readAsDataURL(a)}},className:"absolute inset-0 opacity-0 cursor-pointer z-10",accept:"image/*"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold uppercase tracking-widest text-neutral-400 mb-2",children:"Description"}),(0,a.jsx)("textarea",{name:"description",defaultValue:e.description,rows:6,className:"w-full p-4 border border-neutral-200 focus:outline-none focus:border-black transition-colors"})]}),(0,a.jsx)("div",{className:"pt-8 border-t border-neutral-100",children:(0,a.jsx)("button",{type:"submit",disabled:d,className:"w-full md:w-auto px-12 py-4 bg-black text-white font-bold hover:bg-neutral-800 transition-colors flex items-center justify-center gap-2 disabled:bg-neutral-400",children:d?(0,a.jsx)(a.Fragment,{children:"Saving Changes..."}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.FloppyDisk,{size:18,weight:"bold"}),"Save Department Details"]})})})]})}e.s(["default",()=>c])},88759,e=>{"use strict";var a=e.i(43476),t=e.i(90615),l=e.i(90961),r=e.i(87583),n=e.i(22016),s=e.i(80544),i=e.i(71645),c=e.i(18566);function o(){let e=(0,c.useSearchParams)().get("id"),[o,d]=(0,i.useState)(null),[m,u]=(0,i.useState)([]),[p,h]=(0,i.useState)([]),[f,g]=(0,i.useState)(!0),x=(0,t.createClient)();return((0,i.useEffect)(()=>{(async()=>{if(!e)return g(!1);try{let[{data:a},{data:t},{data:l}]=await Promise.all([x.from("Department").select("*").eq("id",e).single(),x.from("School").select("id, name"),x.from("Faculty").select("id, name, role").order("name",{ascending:!0})]);d(a),u(t||[]),h(l||[])}catch(e){console.error("Error fetching department data:",e)}finally{g(!1)}})()},[e,x]),f)?(0,a.jsx)("div",{className:"flex items-center justify-center py-20 min-h-[60vh]",children:(0,a.jsx)(r.CircleNotch,{className:"animate-spin text-neutral-400",size:40,weight:"bold"})}):!o&&e?(0,a.jsxs)("div",{className:"p-12 text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Department Not Found"}),(0,a.jsx)(n.default,{href:"/admin/departments",className:"text-blue-600 font-bold hover:underline",children:"Back to Departments"})]}):(0,a.jsxs)("div",{className:"max-w-4xl mx-auto pb-24 animate-in fade-in duration-500",children:[(0,a.jsxs)("div",{className:"mb-8 flex items-center justify-between",children:[(0,a.jsxs)(n.default,{href:"/admin/departments",className:"flex items-center gap-2 text-neutral-500 hover:text-black transition-colors font-bold",children:[(0,a.jsx)(l.CaretLeft,{size:18,weight:"bold"})," Back to Departments"]}),(0,a.jsx)("h1",{className:"text-3xl font-bold uppercase tracking-tight text-neutral-900",children:"Edit Department"})]}),(0,a.jsx)(s.default,{department:o,schools:m,facultyMembers:p})]})}function d(){return(0,a.jsx)(i.Suspense,{fallback:(0,a.jsx)("div",{className:"flex items-center justify-center py-20 min-h-[60vh]",children:(0,a.jsx)(r.CircleNotch,{className:"animate-spin text-neutral-400",size:40,weight:"bold"})}),children:(0,a.jsx)(o,{})})}e.s(["default",()=>d])}]);