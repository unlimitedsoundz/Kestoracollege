(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,27269,e=>{"use strict";var t=e.i(71645);let a=new Map([["bold",t.createElement(t.Fragment,null,t.createElement("path",{d:"M236,128a108,108,0,0,1-216,0c0-42.52,24.73-81.34,63-98.9A12,12,0,1,1,93,50.91C63.24,64.57,44,94.83,44,128a84,84,0,0,0,168,0c0-33.17-19.24-63.43-49-77.09A12,12,0,1,1,173,29.1C211.27,46.66,236,85.48,236,128Z"}))],["duotone",t.createElement(t.Fragment,null,t.createElement("path",{d:"M224,128a96,96,0,1,1-96-96A96,96,0,0,1,224,128Z",opacity:"0.2"}),t.createElement("path",{d:"M232,128a104,104,0,0,1-208,0c0-41,23.81-78.36,60.66-95.27a8,8,0,0,1,6.68,14.54C60.15,61.59,40,93.27,40,128a88,88,0,0,0,176,0c0-34.73-20.15-66.41-51.34-80.73a8,8,0,0,1,6.68-14.54C208.19,49.64,232,87,232,128Z"}))],["fill",t.createElement(t.Fragment,null,t.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,176A72,72,0,0,1,92,65.64a8,8,0,0,1,8,13.85,56,56,0,1,0,56,0,8,8,0,0,1,8-13.85A72,72,0,0,1,128,200Z"}))],["light",t.createElement(t.Fragment,null,t.createElement("path",{d:"M230,128a102,102,0,0,1-204,0c0-40.18,23.35-76.86,59.5-93.45a6,6,0,0,1,5,10.9C58.61,60.09,38,92.49,38,128a90,90,0,0,0,180,0c0-35.51-20.61-67.91-52.5-82.55a6,6,0,0,1,5-10.9C206.65,51.14,230,87.82,230,128Z"}))],["regular",t.createElement(t.Fragment,null,t.createElement("path",{d:"M232,128a104,104,0,0,1-208,0c0-41,23.81-78.36,60.66-95.27a8,8,0,0,1,6.68,14.54C60.15,61.59,40,93.27,40,128a88,88,0,0,0,176,0c0-34.73-20.15-66.41-51.34-80.73a8,8,0,0,1,6.68-14.54C208.19,49.64,232,87,232,128Z"}))],["thin",t.createElement(t.Fragment,null,t.createElement("path",{d:"M228,128a100,100,0,0,1-200,0c0-39.4,22.9-75.37,58.33-91.63a4,4,0,1,1,3.34,7.27C57.07,58.6,36,91.71,36,128a92,92,0,0,0,184,0c0-36.29-21.07-69.4-53.67-84.36a4,4,0,1,1,3.34-7.27C205.1,52.63,228,88.6,228,128Z"}))]]);e.s(["default",()=>a])},87583,e=>{"use strict";var t=e.i(71645),a=e.i(69464),l=e.i(27269);let r=t.forwardRef((e,r)=>t.createElement(a.default,{ref:r,...e,weights:l.default}));r.displayName="CircleNotchIcon",e.s(["CircleNotch",()=>r])},58697,e=>{"use strict";function t(e){if(!e)return"-";let t=new Date(e);if(isNaN(t.getTime()))return"-";let a=String(t.getDate()).padStart(2,"0"),l=String(t.getMonth()+1).padStart(2,"0"),r=t.getFullYear();return`${a}/${l}/${r}`}e.s(["formatToDDMMYYYY",()=>t])},38884,e=>{"use strict";var t=e.i(71645);let a=new Map([["bold",t.createElement(t.Fragment,null,t.createElement("path",{d:"M176.49,95.51a12,12,0,0,1,0,17l-56,56a12,12,0,0,1-17,0l-24-24a12,12,0,1,1,17-17L112,143l47.51-47.52A12,12,0,0,1,176.49,95.51ZM236,128A108,108,0,1,1,128,20,108.12,108.12,0,0,1,236,128Zm-24,0a84,84,0,1,0-84,84A84.09,84.09,0,0,0,212,128Z"}))],["duotone",t.createElement(t.Fragment,null,t.createElement("path",{d:"M224,128a96,96,0,1,1-96-96A96,96,0,0,1,224,128Z",opacity:"0.2"}),t.createElement("path",{d:"M173.66,98.34a8,8,0,0,1,0,11.32l-56,56a8,8,0,0,1-11.32,0l-24-24a8,8,0,0,1,11.32-11.32L112,148.69l50.34-50.35A8,8,0,0,1,173.66,98.34ZM232,128A104,104,0,1,1,128,24,104.11,104.11,0,0,1,232,128Zm-16,0a88,88,0,1,0-88,88A88.1,88.1,0,0,0,216,128Z"}))],["fill",t.createElement(t.Fragment,null,t.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm45.66,85.66-56,56a8,8,0,0,1-11.32,0l-24-24a8,8,0,0,1,11.32-11.32L112,148.69l50.34-50.35a8,8,0,0,1,11.32,11.32Z"}))],["light",t.createElement(t.Fragment,null,t.createElement("path",{d:"M172.24,99.76a6,6,0,0,1,0,8.48l-56,56a6,6,0,0,1-8.48,0l-24-24a6,6,0,0,1,8.48-8.48L112,151.51l51.76-51.75A6,6,0,0,1,172.24,99.76ZM230,128A102,102,0,1,1,128,26,102.12,102.12,0,0,1,230,128Zm-12,0a90,90,0,1,0-90,90A90.1,90.1,0,0,0,218,128Z"}))],["regular",t.createElement(t.Fragment,null,t.createElement("path",{d:"M173.66,98.34a8,8,0,0,1,0,11.32l-56,56a8,8,0,0,1-11.32,0l-24-24a8,8,0,0,1,11.32-11.32L112,148.69l50.34-50.35A8,8,0,0,1,173.66,98.34ZM232,128A104,104,0,1,1,128,24,104.11,104.11,0,0,1,232,128Zm-16,0a88,88,0,1,0-88,88A88.1,88.1,0,0,0,216,128Z"}))],["thin",t.createElement(t.Fragment,null,t.createElement("path",{d:"M170.83,101.17a4,4,0,0,1,0,5.66l-56,56a4,4,0,0,1-5.66,0l-24-24a4,4,0,0,1,5.66-5.66L112,154.34l53.17-53.17A4,4,0,0,1,170.83,101.17ZM228,128A100,100,0,1,1,128,28,100.11,100.11,0,0,1,228,128Zm-8,0a92,92,0,1,0-92,92A92.1,92.1,0,0,0,220,128Z"}))]]);e.s(["default",()=>a])},96e3,e=>{"use strict";var t=e.i(71645);let a=new Map([["bold",t.createElement(t.Fragment,null,t.createElement("path",{d:"M216,48H180V36A28,28,0,0,0,152,8H104A28,28,0,0,0,76,36V48H40a12,12,0,0,0,0,24h4V208a20,20,0,0,0,20,20H192a20,20,0,0,0,20-20V72h4a12,12,0,0,0,0-24ZM100,36a4,4,0,0,1,4-4h48a4,4,0,0,1,4,4V48H100Zm88,168H68V72H188ZM116,104v64a12,12,0,0,1-24,0V104a12,12,0,0,1,24,0Zm48,0v64a12,12,0,0,1-24,0V104a12,12,0,0,1,24,0Z"}))],["duotone",t.createElement(t.Fragment,null,t.createElement("path",{d:"M200,56V208a8,8,0,0,1-8,8H64a8,8,0,0,1-8-8V56Z",opacity:"0.2"}),t.createElement("path",{d:"M216,48H176V40a24,24,0,0,0-24-24H104A24,24,0,0,0,80,40v8H40a8,8,0,0,0,0,16h8V208a16,16,0,0,0,16,16H192a16,16,0,0,0,16-16V64h8a8,8,0,0,0,0-16ZM96,40a8,8,0,0,1,8-8h48a8,8,0,0,1,8,8v8H96Zm96,168H64V64H192ZM112,104v64a8,8,0,0,1-16,0V104a8,8,0,0,1,16,0Zm48,0v64a8,8,0,0,1-16,0V104a8,8,0,0,1,16,0Z"}))],["fill",t.createElement(t.Fragment,null,t.createElement("path",{d:"M216,48H176V40a24,24,0,0,0-24-24H104A24,24,0,0,0,80,40v8H40a8,8,0,0,0,0,16h8V208a16,16,0,0,0,16,16H192a16,16,0,0,0,16-16V64h8a8,8,0,0,0,0-16ZM112,168a8,8,0,0,1-16,0V104a8,8,0,0,1,16,0Zm48,0a8,8,0,0,1-16,0V104a8,8,0,0,1,16,0Zm0-120H96V40a8,8,0,0,1,8-8h48a8,8,0,0,1,8,8Z"}))],["light",t.createElement(t.Fragment,null,t.createElement("path",{d:"M216,50H174V40a22,22,0,0,0-22-22H104A22,22,0,0,0,82,40V50H40a6,6,0,0,0,0,12H50V208a14,14,0,0,0,14,14H192a14,14,0,0,0,14-14V62h10a6,6,0,0,0,0-12ZM94,40a10,10,0,0,1,10-10h48a10,10,0,0,1,10,10V50H94ZM194,208a2,2,0,0,1-2,2H64a2,2,0,0,1-2-2V62H194ZM110,104v64a6,6,0,0,1-12,0V104a6,6,0,0,1,12,0Zm48,0v64a6,6,0,0,1-12,0V104a6,6,0,0,1,12,0Z"}))],["regular",t.createElement(t.Fragment,null,t.createElement("path",{d:"M216,48H176V40a24,24,0,0,0-24-24H104A24,24,0,0,0,80,40v8H40a8,8,0,0,0,0,16h8V208a16,16,0,0,0,16,16H192a16,16,0,0,0,16-16V64h8a8,8,0,0,0,0-16ZM96,40a8,8,0,0,1,8-8h48a8,8,0,0,1,8,8v8H96Zm96,168H64V64H192ZM112,104v64a8,8,0,0,1-16,0V104a8,8,0,0,1,16,0Zm48,0v64a8,8,0,0,1-16,0V104a8,8,0,0,1,16,0Z"}))],["thin",t.createElement(t.Fragment,null,t.createElement("path",{d:"M216,52H172V40a20,20,0,0,0-20-20H104A20,20,0,0,0,84,40V52H40a4,4,0,0,0,0,8H52V208a12,12,0,0,0,12,12H192a12,12,0,0,0,12-12V60h12a4,4,0,0,0,0-8ZM92,40a12,12,0,0,1,12-12h48a12,12,0,0,1,12,12V52H92ZM196,208a4,4,0,0,1-4,4H64a4,4,0,0,1-4-4V60H196ZM108,104v64a4,4,0,0,1-8,0V104a4,4,0,0,1,8,0Zm48,0v64a4,4,0,0,1-8,0V104a4,4,0,0,1,8,0Z"}))]]);e.s(["default",()=>a])},44876,e=>{"use strict";var t=e.i(71645);let a=new Map([["bold",t.createElement(t.Fragment,null,t.createElement("path",{d:"M128,20A108,108,0,1,0,236,128,108.12,108.12,0,0,0,128,20Zm0,192a84,84,0,1,1,84-84A84.09,84.09,0,0,1,128,212Zm68-84a12,12,0,0,1-12,12H128a12,12,0,0,1-12-12V72a12,12,0,0,1,24,0v44h44A12,12,0,0,1,196,128Z"}))],["duotone",t.createElement(t.Fragment,null,t.createElement("path",{d:"M224,128a96,96,0,1,1-96-96A96,96,0,0,1,224,128Z",opacity:"0.2"}),t.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm64-88a8,8,0,0,1-8,8H128a8,8,0,0,1-8-8V72a8,8,0,0,1,16,0v48h48A8,8,0,0,1,192,128Z"}))],["fill",t.createElement(t.Fragment,null,t.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm56,112H128a8,8,0,0,1-8-8V72a8,8,0,0,1,16,0v48h48a8,8,0,0,1,0,16Z"}))],["light",t.createElement(t.Fragment,null,t.createElement("path",{d:"M128,26A102,102,0,1,0,230,128,102.12,102.12,0,0,0,128,26Zm0,192a90,90,0,1,1,90-90A90.1,90.1,0,0,1,128,218Zm62-90a6,6,0,0,1-6,6H128a6,6,0,0,1-6-6V72a6,6,0,0,1,12,0v50h50A6,6,0,0,1,190,128Z"}))],["regular",t.createElement(t.Fragment,null,t.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm64-88a8,8,0,0,1-8,8H128a8,8,0,0,1-8-8V72a8,8,0,0,1,16,0v48h48A8,8,0,0,1,192,128Z"}))],["thin",t.createElement(t.Fragment,null,t.createElement("path",{d:"M128,28A100,100,0,1,0,228,128,100.11,100.11,0,0,0,128,28Zm0,192a92,92,0,1,1,92-92A92.1,92.1,0,0,1,128,220Zm60-92a4,4,0,0,1-4,4H128a4,4,0,0,1-4-4V72a4,4,0,0,1,8,0v52h52A4,4,0,0,1,188,128Z"}))]]);e.s(["default",()=>a])},78130,e=>{"use strict";var t=e.i(71645);let a=new Map([["bold",t.createElement(t.Fragment,null,t.createElement("path",{d:"M224,44H32A20,20,0,0,0,12,64V192a20,20,0,0,0,20,20H224a20,20,0,0,0,20-20V64A20,20,0,0,0,224,44Zm-4,24V88H36V68ZM36,188V112H220v76Zm172-24a12,12,0,0,1-12,12H164a12,12,0,0,1,0-24h32A12,12,0,0,1,208,164Zm-68,0a12,12,0,0,1-12,12H116a12,12,0,0,1,0-24h12A12,12,0,0,1,140,164Z"}))],["duotone",t.createElement(t.Fragment,null,t.createElement("path",{d:"M232,96v96a8,8,0,0,1-8,8H32a8,8,0,0,1-8-8V96Z",opacity:"0.2"}),t.createElement("path",{d:"M224,48H32A16,16,0,0,0,16,64V192a16,16,0,0,0,16,16H224a16,16,0,0,0,16-16V64A16,16,0,0,0,224,48Zm0,16V88H32V64Zm0,128H32V104H224v88Zm-16-24a8,8,0,0,1-8,8H168a8,8,0,0,1,0-16h32A8,8,0,0,1,208,168Zm-64,0a8,8,0,0,1-8,8H120a8,8,0,0,1,0-16h16A8,8,0,0,1,144,168Z"}))],["fill",t.createElement(t.Fragment,null,t.createElement("path",{d:"M224,48H32A16,16,0,0,0,16,64V192a16,16,0,0,0,16,16H224a16,16,0,0,0,16-16V64A16,16,0,0,0,224,48ZM136,176H120a8,8,0,0,1,0-16h16a8,8,0,0,1,0,16Zm64,0H168a8,8,0,0,1,0-16h32a8,8,0,0,1,0,16ZM32,88V64H224V88Z"}))],["light",t.createElement(t.Fragment,null,t.createElement("path",{d:"M224,50H32A14,14,0,0,0,18,64V192a14,14,0,0,0,14,14H224a14,14,0,0,0,14-14V64A14,14,0,0,0,224,50ZM32,62H224a2,2,0,0,1,2,2V90H30V64A2,2,0,0,1,32,62ZM224,194H32a2,2,0,0,1-2-2V102H226v90A2,2,0,0,1,224,194Zm-18-26a6,6,0,0,1-6,6H168a6,6,0,0,1,0-12h32A6,6,0,0,1,206,168Zm-64,0a6,6,0,0,1-6,6H120a6,6,0,0,1,0-12h16A6,6,0,0,1,142,168Z"}))],["regular",t.createElement(t.Fragment,null,t.createElement("path",{d:"M224,48H32A16,16,0,0,0,16,64V192a16,16,0,0,0,16,16H224a16,16,0,0,0,16-16V64A16,16,0,0,0,224,48Zm0,16V88H32V64Zm0,128H32V104H224v88Zm-16-24a8,8,0,0,1-8,8H168a8,8,0,0,1,0-16h32A8,8,0,0,1,208,168Zm-64,0a8,8,0,0,1-8,8H120a8,8,0,0,1,0-16h16A8,8,0,0,1,144,168Z"}))],["thin",t.createElement(t.Fragment,null,t.createElement("path",{d:"M224,52H32A12,12,0,0,0,20,64V192a12,12,0,0,0,12,12H224a12,12,0,0,0,12-12V64A12,12,0,0,0,224,52ZM32,60H224a4,4,0,0,1,4,4V92H28V64A4,4,0,0,1,32,60ZM224,196H32a4,4,0,0,1-4-4V100H228v92A4,4,0,0,1,224,196Zm-20-28a4,4,0,0,1-4,4H168a4,4,0,0,1,0-8h32A4,4,0,0,1,204,168Zm-64,0a4,4,0,0,1-4,4H120a4,4,0,0,1,0-8h16A4,4,0,0,1,140,168Z"}))]]);e.s(["default",()=>a])},61652,e=>{"use strict";var t=e.i(71645),a=e.i(69464),l=e.i(96e3);let r=t.forwardRef((e,r)=>t.createElement(a.default,{ref:r,...e,weights:l.default}));r.displayName="TrashIcon",e.s(["Trash",()=>r])},31659,e=>{"use strict";var t=e.i(71645);let a=new Map([["bold",t.createElement(t.Fragment,null,t.createElement("path",{d:"M168.49,104.49,145,128l23.52,23.51a12,12,0,0,1-17,17L128,145l-23.51,23.52a12,12,0,0,1-17-17L111,128,87.51,104.49a12,12,0,0,1,17-17L128,111l23.51-23.52a12,12,0,0,1,17,17ZM236,128A108,108,0,1,1,128,20,108.12,108.12,0,0,1,236,128Zm-24,0a84,84,0,1,0-84,84A84.09,84.09,0,0,0,212,128Z"}))],["duotone",t.createElement(t.Fragment,null,t.createElement("path",{d:"M224,128a96,96,0,1,1-96-96A96,96,0,0,1,224,128Z",opacity:"0.2"}),t.createElement("path",{d:"M165.66,101.66,139.31,128l26.35,26.34a8,8,0,0,1-11.32,11.32L128,139.31l-26.34,26.35a8,8,0,0,1-11.32-11.32L116.69,128,90.34,101.66a8,8,0,0,1,11.32-11.32L128,116.69l26.34-26.35a8,8,0,0,1,11.32,11.32ZM232,128A104,104,0,1,1,128,24,104.11,104.11,0,0,1,232,128Zm-16,0a88,88,0,1,0-88,88A88.1,88.1,0,0,0,216,128Z"}))],["fill",t.createElement(t.Fragment,null,t.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm37.66,130.34a8,8,0,0,1-11.32,11.32L128,139.31l-26.34,26.35a8,8,0,0,1-11.32-11.32L116.69,128,90.34,101.66a8,8,0,0,1,11.32-11.32L128,116.69l26.34-26.35a8,8,0,0,1,11.32,11.32L139.31,128Z"}))],["light",t.createElement(t.Fragment,null,t.createElement("path",{d:"M164.24,100.24,136.48,128l27.76,27.76a6,6,0,1,1-8.48,8.48L128,136.48l-27.76,27.76a6,6,0,0,1-8.48-8.48L119.52,128,91.76,100.24a6,6,0,0,1,8.48-8.48L128,119.52l27.76-27.76a6,6,0,0,1,8.48,8.48ZM230,128A102,102,0,1,1,128,26,102.12,102.12,0,0,1,230,128Zm-12,0a90,90,0,1,0-90,90A90.1,90.1,0,0,0,218,128Z"}))],["regular",t.createElement(t.Fragment,null,t.createElement("path",{d:"M165.66,101.66,139.31,128l26.35,26.34a8,8,0,0,1-11.32,11.32L128,139.31l-26.34,26.35a8,8,0,0,1-11.32-11.32L116.69,128,90.34,101.66a8,8,0,0,1,11.32-11.32L128,116.69l26.34-26.35a8,8,0,0,1,11.32,11.32ZM232,128A104,104,0,1,1,128,24,104.11,104.11,0,0,1,232,128Zm-16,0a88,88,0,1,0-88,88A88.1,88.1,0,0,0,216,128Z"}))],["thin",t.createElement(t.Fragment,null,t.createElement("path",{d:"M162.83,98.83,133.66,128l29.17,29.17a4,4,0,0,1-5.66,5.66L128,133.66,98.83,162.83a4,4,0,0,1-5.66-5.66L122.34,128,93.17,98.83a4,4,0,0,1,5.66-5.66L128,122.34l29.17-29.17a4,4,0,1,1,5.66,5.66ZM228,128A100,100,0,1,1,128,28,100.11,100.11,0,0,1,228,128Zm-8,0a92,92,0,1,0-92,92A92.1,92.1,0,0,0,220,128Z"}))]]);e.s(["default",()=>a])},94909,e=>{"use strict";var t=e.i(71645),a=e.i(69464),l=e.i(31659);let r=t.forwardRef((e,r)=>t.createElement(a.default,{ref:r,...e,weights:l.default}));r.displayName="XCircleIcon",e.s(["XCircle",()=>r])},17389,e=>{"use strict";var t=e.i(71645),a=e.i(69464),l=e.i(38884);let r=t.forwardRef((e,r)=>t.createElement(a.default,{ref:r,...e,weights:l.default}));r.displayName="CheckCircleIcon",e.s(["CheckCircle",()=>r])},30233,e=>{"use strict";var t=e.i(71645),a=e.i(69464),l=e.i(44876);let r=t.forwardRef((e,r)=>t.createElement(a.default,{ref:r,...e,weights:l.default}));r.displayName="ClockIcon",e.s(["Clock",()=>r])},6949,e=>{"use strict";var t=e.i(71645),a=e.i(69464),l=e.i(80911);let r=t.forwardRef((e,r)=>t.createElement(a.default,{ref:r,...e,weights:l.default}));r.displayName="UserIcon",e.s(["User",()=>r])},49444,e=>{"use strict";var t=e.i(43476),a=e.i(90615),l=e.i(22016),r=e.i(6949),n=e.i(17389),s=e.i(94909),i=e.i(30233),c=e.i(71645),d=e.i(69464),m=e.i(78130);let o=c.forwardRef((e,t)=>c.createElement(d.default,{ref:t,...e,weights:m.default}));o.displayName="CreditCardIcon";var u=e.i(87583),h=e.i(58697),p=e.i(18566),x=e.i(61652);function f({id:e}){let l=(0,p.useRouter)(),[r,n]=(0,c.useState)(!1),s=async()=>{if(!confirm("Are you sure you want to delete this student record? This will also remove all their registrations."))return;n(!0);let t=(0,a.createClient)();try{let{error:a}=await t.from("module_enrollments").delete().eq("student_id",e);if(a)throw Error(`Failed to clear enrollments: ${a.message}`);let{error:r}=await t.from("students").delete().eq("id",e);if(r)throw r;l.refresh()}catch(e){console.error("Delete Student Error:",e),alert(`Failed to delete student: ${e.message}`)}finally{n(!1)}};return(0,t.jsx)("button",{onClick:s,disabled:r,className:"text-neutral-400 hover:text-red-600 transition-colors p-1 disabled:opacity-50",title:"Delete Student",children:(0,t.jsx)(x.Trash,{size:14,weight:"bold"})})}function E(){let[d,m]=(0,c.useState)([]),[p,x]=(0,c.useState)([]),[E,g]=(0,c.useState)(!0),[A,N]=(0,c.useState)(null),[Z,b]=(0,c.useState)(null),[M,j]=(0,c.useState)(null),H=(0,a.createClient)(),V=async()=>{try{let{data:{user:e}}=await H.auth.getUser();if(j(e),e){let{data:t}=await H.from("profiles").select("role").eq("id",e.id).single();t&&j(e=>({...e,profileRole:t.role}))}let{data:t,error:a}=await H.from("students").select(`
                    *,
                    user:profiles(first_name, last_name, email),
                    program:Course(title),
                    application:applications!application_id(personal_info)
                `).order("created_at",{ascending:!1});a&&N(a.message);let{data:l,error:r}=await H.from("applications").select(`
                    *,
                    user:profiles(first_name, last_name, email),
                    program:Course(title),
                    offer:admission_offers(
                        id,
                        payments:tuition_payments(transaction_reference, created_at, amount, status)
                    )
                `).neq("status","REJECTED").order("updated_at",{ascending:!1});r&&!a&&N(r.message),m(t||[]);let n=new Set(t?.map(e=>e.application_id)),s=["OFFER_ACCEPTED","PAYMENT_SUBMITTED","ENROLLED","ADMISSION_LETTER_GENERATED"],i=l?.filter(e=>!n.has(e.id)&&s.includes(e.status))||[];x(i),console.log("Fetched Data (Client):",{students:t,apps:l})}catch(e){console.error("Outer Error fetching students data:",e)}finally{g(!1)}};(0,c.useEffect)(()=>{V()},[]);let v=async t=>{if(confirm("Are you sure you want to officially ENROLL this student? This will generate a Student ID and institutional email.")){b(t);try{let{enrollStudent:a}=await e.A(73975),l=await a(t);l.success?(alert(`Student enrolled successfully! ID: ${l.studentId}`),await V()):alert(`Enrollment failed: ${l.error}`)}catch(e){console.error("Enrollment error:",e),alert("An unexpected error occurred during enrollment.")}finally{b(null)}}},w=e=>{let t=e.offer||e.admission_offers||e.admission_offer,a=Array.isArray(t)?t:t?[t]:[];if(0===a.length)return{ref:"N/A",date:"N/A"};let l=a.flatMap(e=>{let t=e.payments||e.tuition_payments||e.tuition_payment;return Array.isArray(t)?t:t?[t]:[]}).sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime());return 0===l.length?{ref:"N/A",date:"N/A"}:{ref:l[0].transaction_reference||"N/A",date:(0,h.formatToDDMMYYYY)(l[0].created_at)}};return E?(0,t.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,t.jsx)(u.CircleNotch,{className:"animate-spin text-neutral-400",size:40,weight:"bold"})}):A?(0,t.jsxs)("div",{className:"p-20 text-center",children:[(0,t.jsx)(s.XCircle,{size:48,weight:"bold",className:"mx-auto mb-4 text-red-500 opacity-20"}),(0,t.jsx)("h2",{className:"text-xl font-bold text-neutral-900",children:"Error loading data"}),(0,t.jsx)("p",{className:"text-neutral-500 text-sm mt-1",children:A}),(0,t.jsx)("button",{onClick:()=>{N(null),g(!0),V()},className:"mt-6 px-4 py-2 bg-neutral-900 text-white text-xs font-bold uppercase tracking-widest rounded-sm hover:bg-neutral-800 transition-colors",children:"Retry"})]}):(0,t.jsxs)("div",{className:"animate-in fade-in duration-500",children:[(0,t.jsx)("div",{className:"flex justify-between items-center mb-8",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-neutral-900",children:"Enrolled Students"}),(0,t.jsx)("p",{className:"text-neutral-500 text-sm mt-1",children:"Manage official student records."})]})}),p&&p.length>0&&(0,t.jsxs)("div",{className:"mb-12",children:[(0,t.jsxs)("h2",{className:"text-xl font-bold text-neutral-900 mb-4 flex items-center gap-2",children:[(0,t.jsx)(i.Clock,{size:20,weight:"bold",className:"text-amber-500"}),"Pending Enrollments",(0,t.jsx)("span",{className:"text-xs bg-amber-100 text-amber-700 px-2 py-0.5 rounded-full",children:p.length})]}),(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-neutral-200 overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-left min-w-[800px]",children:[(0,t.jsx)("thead",{className:"bg-amber-50/50 border-b border-neutral-200",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"p-4 font-bold text-neutral-600 text-xs uppercase",children:"Applicant"}),(0,t.jsx)("th",{className:"p-4 font-bold text-neutral-600 text-xs uppercase",children:"Program"}),(0,t.jsx)("th",{className:"p-4 font-bold text-neutral-600 text-xs uppercase",children:"Offer Status"}),(0,t.jsx)("th",{className:"p-4 font-bold text-neutral-600 text-xs uppercase",children:"Payment Ref"}),(0,t.jsx)("th",{className:"p-4 font-bold text-neutral-600 text-xs uppercase",children:"Submitted"}),(0,t.jsx)("th",{className:"p-4 font-bold text-neutral-600 text-xs uppercase text-right",children:"Action"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-neutral-100",children:p.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-neutral-50 transition-colors",children:[(0,t.jsxs)("td",{className:"p-4",children:[(0,t.jsxs)("div",{className:"font-bold text-neutral-900 text-sm",children:[e.user?.first_name||e.personal_info?.firstName," ",e.user?.last_name||e.personal_info?.lastName]}),(0,t.jsx)("div",{className:"text-xs text-neutral-500",children:e.user?.email||e.personal_info?.email||"No Email"})]}),(0,t.jsx)("td",{className:"p-4 text-xs font-medium text-neutral-600",children:e.program?.title}),(0,t.jsx)("td",{className:"p-4",children:"PAYMENT_SUBMITTED"===e.status?(0,t.jsxs)("span",{className:"px-2 py-1 bg-emerald-100 text-emerald-700 rounded-md text-[10px] font-bold uppercase flex items-center gap-1 w-fit",children:[(0,t.jsx)(n.CheckCircle,{size:10,weight:"bold"})," Payment Success"]}):"ENROLLED"===e.status||"ADMISSION_LETTER_GENERATED"===e.status?(0,t.jsxs)("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded-md text-[10px] font-bold uppercase flex items-center gap-1 w-fit",children:[(0,t.jsx)(n.CheckCircle,{size:10,weight:"bold"})," Payment Verified"]}):(0,t.jsxs)("span",{className:"px-2 py-1 bg-amber-100 text-amber-700 rounded-md text-[10px] font-bold uppercase flex items-center gap-1 w-fit",children:[(0,t.jsx)(i.Clock,{size:10,weight:"bold"})," Offer Accepted"]})}),(0,t.jsx)("td",{className:"p-4 text-xs font-mono text-neutral-500 uppercase",children:w(e).ref}),(0,t.jsx)("td",{className:"p-4 text-xs text-neutral-500",children:w(e).date}),(0,t.jsx)("td",{className:"p-4 text-right",children:(0,t.jsxs)("button",{onClick:()=>v(e.id),disabled:Z===e.id||!["OFFER_ACCEPTED","PAYMENT_SUBMITTED","ENROLLED","ADMISSION_LETTER_GENERATED"].includes(e.status),className:`px-3 py-2 rounded-sm text-[10px] font-bold uppercase tracking-widest transition-colors flex items-center gap-2 ml-auto ${["OFFER_ACCEPTED","PAYMENT_SUBMITTED","ENROLLED","ADMISSION_LETTER_GENERATED"].includes(e.status)?"bg-emerald-600 text-white hover:bg-emerald-700":"bg-neutral-900 text-white hover:bg-neutral-700 opacity-50"} ${Z===e.id?"opacity-50 cursor-not-allowed":""}`,title:["OFFER_ACCEPTED","PAYMENT_SUBMITTED","ENROLLED","ADMISSION_LETTER_GENERATED"].includes(e.status)?"Finalize Enrollment":"Waiting for student payment",children:[Z===e.id?(0,t.jsx)(u.CircleNotch,{size:12,className:"animate-spin"}):(0,t.jsx)(o,{size:12,weight:"bold"}),Z===e.id?"Processing...":["OFFER_ACCEPTED","PAYMENT_SUBMITTED","ENROLLED","ADMISSION_LETTER_GENERATED"].includes(e.status)?"OFFER_ACCEPTED"===e.status?"Manual Enroll":"Confirm & Enroll":"Wait for Payment"]})})]},e.id))})]})})]}),(0,t.jsxs)("h2",{className:"text-xl font-bold text-neutral-900 mb-4 flex items-center gap-2",children:[(0,t.jsx)(n.CheckCircle,{size:20,weight:"bold",className:"text-emerald-500"}),"Active Student Body"]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-neutral-200 overflow-x-auto",children:[(0,t.jsxs)("table",{className:"w-full text-left min-w-[1000px]",children:[(0,t.jsx)("thead",{className:"bg-neutral-50 border-b border-neutral-200",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"p-4 font-bold text-neutral-600 text-xs uppercase",children:"Student ID"}),(0,t.jsx)("th",{className:"p-4 font-bold text-neutral-600 text-xs uppercase",children:"Student"}),(0,t.jsx)("th",{className:"p-4 font-bold text-neutral-600 text-xs uppercase",children:"Program"}),(0,t.jsx)("th",{className:"p-4 font-bold text-neutral-600 text-xs uppercase",children:"Email"}),(0,t.jsx)("th",{className:"p-4 font-bold text-neutral-600 text-xs uppercase",children:"Status"}),(0,t.jsx)("th",{className:"p-4 font-bold text-neutral-600 text-xs uppercase",children:"Joined"}),(0,t.jsx)("th",{className:"p-4 font-bold text-neutral-600 text-xs uppercase text-right",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-neutral-100",children:d?.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-neutral-50 transition-colors",children:[(0,t.jsx)("td",{className:"p-4 text-xs font-mono font-medium text-neutral-500",children:e.student_id}),(0,t.jsx)("td",{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-neutral-100 rounded-full flex items-center justify-center text-neutral-500 font-bold text-xs",children:(e.user?.first_name||e.application?.personal_info?.firstName)?.[0]}),(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"font-bold text-neutral-900 text-sm",children:[e.user?.first_name||e.application?.personal_info?.firstName," ",e.user?.last_name||e.application?.personal_info?.lastName]})})]})}),(0,t.jsx)("td",{className:"p-4",children:(0,t.jsx)("span",{className:"text-xs font-medium text-neutral-600 truncate max-w-[200px] block",title:e.program?.title,children:e.program?.title||"N/A"})}),(0,t.jsx)("td",{className:"p-4 text-xs text-neutral-500 font-mono",children:e.institutional_email}),(0,t.jsx)("td",{className:"p-4",children:(0,t.jsxs)("span",{className:"px-2 py-1 bg-emerald-100 text-emerald-700 rounded-md text-[10px] font-bold uppercase flex items-center gap-1 w-fit",children:[(0,t.jsx)(n.CheckCircle,{size:10,weight:"bold"})," ",e.enrollment_status]})}),(0,t.jsx)("td",{className:"p-4 text-xs text-neutral-400",children:(0,h.formatToDDMMYYYY)(e.created_at)}),(0,t.jsx)("td",{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[(0,t.jsx)(l.default,{href:`/admin/admissions/review?id=${e.application_id}`,className:"text-[10px] font-bold uppercase tracking-widest text-neutral-400 hover:text-black",children:"View"}),(0,t.jsx)(f,{id:e.id})]})})]},e.id))})]}),(!d||0===d.length)&&(0,t.jsxs)("div",{className:"p-20 text-center text-neutral-400",children:[(0,t.jsx)(r.User,{size:48,weight:"regular",className:"mx-auto mb-4 opacity-20"}),(0,t.jsx)("p",{children:"No enrolled students found."}),(0,t.jsx)("p",{className:"text-xs mt-2",children:"Students appear here after tuition payment and enrollment confirmation."}),(0,t.jsxs)("div",{className:"mt-10 p-4 bg-neutral-50 rounded text-left border border-neutral-200",children:[(0,t.jsx)("p",{className:"text-[10px] uppercase font-bold text-neutral-400 mb-2",children:"Supabase Response Debug:"}),(0,t.jsx)("pre",{className:"text-[10px] font-mono overflow-auto max-h-40",children:JSON.stringify({studentCount:d?.length,pendingCount:p?.length,loading:E,hasError:!!A,currentUser:M?{id:M.id,email:M.email,role:M.profileRole}:"Not logged in"},null,2)})]})]})]})]})}e.s(["default",()=>E],49444)},73975,e=>{e.v(t=>Promise.all(["static/chunks/a936e3b5846f114e.js"].map(t=>e.l(t))).then(()=>t(93231)))}]);