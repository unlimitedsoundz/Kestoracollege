(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,34039,e=>{"use strict";var t=e.i(71645),r=e.i(75108),a=e.i(59721);let l=t.forwardRef((e,l)=>t.createElement(r.default,{ref:l,...e,weights:a.default}));l.displayName="BookOpenIcon",e.s(["BookOpen",()=>l])},46951,e=>{"use strict";var t=e.i(71645),r=e.i(75108),a=e.i(97199);let l=t.forwardRef((e,l)=>t.createElement(r.default,{ref:l,...e,weights:a.default}));l.displayName="ArrowRightIcon",e.s(["ArrowRight",()=>l])},57094,e=>{"use strict";let t={BACHELOR:{BUSINESS:4e3,ARTS:4e3,TECHNOLOGY:6e3,SCIENCE:7500},MASTER:{BUSINESS:6e3,ARTS:6e3,TECHNOLOGY:6e3,SCIENCE:9500}};function r(e){let t=new Date(new Date(e));return t.setDate(t.getDate()+21),new Date<=t}function a(e,r){return t[e][r]}function l(e){return Math.round(.75*e)}function s(e){return e.toLowerCase().includes("2 years")?2:e.toLowerCase().includes("3 years")?3:e.toLowerCase().includes("4 years")?4:2}function n(e){let t=e.toLowerCase();return t.includes("business")?"BUSINESS":t.includes("arts")||t.includes("design")||t.includes("architecture")?"ARTS":t.includes("technology")||t.includes("engineering")?"TECHNOLOGY":t.includes("science")?"SCIENCE":"TECHNOLOGY"}e.s(["EARLY_PAYMENT_DISCOUNT_PERCENT",0,25,"EARLY_PAYMENT_WINDOW_DAYS",0,21,"TUITION_FEES",0,t,"calculateDiscountedFee",()=>l,"getProgramYears",()=>s,"getTuitionFee",()=>a,"isWithinEarlyPaymentWindow",()=>r,"mapSchoolToTuitionField",()=>n])},87943,e=>{"use strict";var t=e.i(71645),r=e.i(75108);let a=new Map([["bold",t.createElement(t.Fragment,null,t.createElement("path",{d:"M219.71,117.38a12,12,0,0,0-7.25-8.52L161.28,88.39l10.59-70.61a12,12,0,0,0-20.64-10l-112,120a12,12,0,0,0,4.31,19.33l51.18,20.47L84.13,238.22a12,12,0,0,0,20.64,10l112-120A12,12,0,0,0,219.71,117.38ZM113.6,203.55l6.27-41.77a12,12,0,0,0-7.41-12.92L68.74,131.37,142.4,52.45l-6.27,41.77a12,12,0,0,0,7.41,12.92l43.72,17.49Z"}))],["duotone",t.createElement(t.Fragment,null,t.createElement("path",{d:"M96,240l16-80L48,136,160,16,144,96l64,24Z",opacity:"0.2"}),t.createElement("path",{d:"M215.79,118.17a8,8,0,0,0-5-5.66L153.18,90.9l14.66-73.33a8,8,0,0,0-13.69-7l-112,120a8,8,0,0,0,3,13l57.63,21.61L88.16,238.43a8,8,0,0,0,13.69,7l112-120A8,8,0,0,0,215.79,118.17ZM109.37,214l10.47-52.38a8,8,0,0,0-5-9.06L62,132.71l84.62-90.66L136.16,94.43a8,8,0,0,0,5,9.06l52.8,19.8Z"}))],["fill",t.createElement(t.Fragment,null,t.createElement("path",{d:"M213.85,125.46l-112,120a8,8,0,0,1-13.69-7l14.66-73.33L45.19,143.49a8,8,0,0,1-3-13l112-120a8,8,0,0,1,13.69,7L153.18,90.9l57.63,21.61a8,8,0,0,1,3,12.95Z"}))],["light",t.createElement(t.Fragment,null,t.createElement("path",{d:"M213.84,118.63a6,6,0,0,0-3.73-4.25L150.88,92.17l15-75a6,6,0,0,0-10.27-5.27l-112,120a6,6,0,0,0,2.28,9.71l59.23,22.21-15,75a6,6,0,0,0,3.14,6.52A6.07,6.07,0,0,0,96,246a6,6,0,0,0,4.39-1.91l112-120A6,6,0,0,0,213.84,118.63ZM106,220.46l11.85-59.28a6,6,0,0,0-3.77-6.8l-55.6-20.85,91.46-98L138.12,94.82a6,6,0,0,0,3.77,6.8l55.6,20.85Z"}))],["regular",t.createElement(t.Fragment,null,t.createElement("path",{d:"M215.79,118.17a8,8,0,0,0-5-5.66L153.18,90.9l14.66-73.33a8,8,0,0,0-13.69-7l-112,120a8,8,0,0,0,3,13l57.63,21.61L88.16,238.43a8,8,0,0,0,13.69,7l112-120A8,8,0,0,0,215.79,118.17ZM109.37,214l10.47-52.38a8,8,0,0,0-5-9.06L62,132.71l84.62-90.66L136.16,94.43a8,8,0,0,0,5,9.06l52.8,19.8Z"}))],["thin",t.createElement(t.Fragment,null,t.createElement("path",{d:"M211.89,119.09a4,4,0,0,0-2.49-2.84l-60.81-22.8,15.33-76.67a4,4,0,0,0-6.84-3.51l-112,120a4,4,0,0,0-1,3.64,4,4,0,0,0,2.49,2.84l60.81,22.8L92.08,239.22a4,4,0,0,0,6.84,3.51l112-120A4,4,0,0,0,211.89,119.09ZM102.68,227l13.24-66.2a4,4,0,0,0-2.52-4.53L55,134.36,153.32,29l-13.24,66.2a4,4,0,0,0,2.52,4.53L201,121.64Z"}))]]),l=t.forwardRef((e,l)=>t.createElement(r.default,{ref:l,...e,weights:a}));l.displayName="LightningIcon",e.s(["Lightning",()=>l],87943)},26778,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(90615),l=e.i(18566),s=e.i(46951),n=e.i(34039),i=e.i(87943),o=e.i(57094);function c({initialCourses:e}){let[c,d]=(0,r.useState)("ALL"),[u,p]=(0,r.useState)(""),[m,g]=(0,r.useState)(null),x=(0,l.useRouter)(),h=(0,a.createClient)(),f=async e=>{g(e);try{let{data:{user:t},error:r}=await h.auth.getUser();if(console.log("[CourseSelector] Auth Check:",{hasUser:!!t,userId:t?.id,error:r}),r||!t){console.error("[CourseSelector] Auth failed:",r),alert(`Session validation failed: ${r?.message||"No active session"}`);return}let a=t?.user_metadata?.student_id,l=t?.user_metadata?.date_of_birth;if(!a||!l){console.log("Metadata missing, fetching profile fallback...");let{data:e}=await h.from("profiles").select("student_id, date_of_birth").eq("id",t.id).single();e&&(a=e.student_id,l=e.date_of_birth,console.log("Profile fallback successful"))}console.log("Proceeding to application creation...",{userId:t.id,courseId:e,hasStudentId:!!a,hasDob:!!l}),console.log("Calling Secure Application Creation RPC...",{userId:t.id,courseId:e,studentId:a});let{data:s,error:n}=await h.rpc("create_application_v2",{p_user_id:t.id,p_course_id:e,p_student_id:a||null,p_dob:l||null});if(n)throw console.error("RPC Execution Error:",n),n;if(s?.error)throw Error(s.error);x.push(`/portal/application?id=${s.id}`)}catch(e){console.error("Detailed Application Creation Error:",{message:e.message,code:e.code,details:e.details,fullError:JSON.stringify(e,Object.getOwnPropertyNames(e))}),alert(`Failed to create application: ${e.message||"Unknown error"}`)}finally{g(null)}},b=e.filter(e=>{let t="ALL"===c||e.degreeLevel===c,r=e.title.toLowerCase().includes(u.toLowerCase())||e.school?.name?.toLowerCase().includes(u.toLowerCase());return t&&r});return(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 justify-between items-end md:items-center bg-neutral-50 p-6 rounded-sm border border-neutral-100",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2 w-full md:w-auto",children:[(0,t.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-widest text-neutral-500",children:"Filter by Level"}),(0,t.jsx)("div",{className:"flex gap-2",children:["ALL","BACHELOR","MASTER"].map(e=>(0,t.jsx)("button",{onClick:()=>d(e),className:`px-4 py-2 text-[10px] font-bold uppercase tracking-widest rounded-sm border transition-all ${c===e?"bg-transparent text-neutral-900 border-neutral-900 shadow-sm":"bg-white text-neutral-400 border-neutral-200 hover:border-neutral-400"}`,children:"ALL"===e?"All Degrees":"BACHELOR"===e?"Bachelors":"Masters"},e))})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2 w-full md:w-64",children:[(0,t.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-widest text-neutral-500",children:"Search Programme"}),(0,t.jsx)("input",{type:"text",placeholder:"NAME OR DEPARTMENT...",value:u,onChange:e=>p(e.target.value),className:"bg-white border border-neutral-200 px-4 py-2 text-[10px] font-bold uppercase tracking-widest focus:outline-none focus:border-neutral-900 transition-colors w-full"})]})]}),(0,t.jsxs)("div",{className:"grid gap-4",children:[b.map(e=>{let r,a;return(0,t.jsxs)("div",{className:"bg-white p-6 rounded-sm border border-neutral-100 flex flex-col md:flex-row gap-8 transition-all hover:border-neutral-300 group",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("h3",{className:"text-lg font-bold uppercase tracking-tight text-neutral-900 leading-none group-hover:text-primary transition-colors",children:e.title}),(0,t.jsx)("p",{className:"text-[10px] text-neutral-600 font-semibold uppercase tracking-widest leading-none",children:e.school?.name})]}),(0,t.jsx)("span",{className:`px-2 py-1 rounded-sm text-[9px] font-bold uppercase tracking-widest border transition-colors ${"MASTER"===e.degreeLevel?"border-neutral-900 text-neutral-900":"border-neutral-300 text-neutral-600"}`,children:"MASTER"===e.degreeLevel?"Masters":"Bachelors"})]}),(0,t.jsx)("p",{className:"text-xs text-neutral-700 font-medium mb-6 line-clamp-2 leading-relaxed uppercase tracking-tight italic",children:e.description||"Advancing knowledge and innovation through world-class research and education."}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-x-8 gap-y-4",children:[(0,t.jsxs)("span",{className:"flex items-center gap-2 text-[10px] font-bold uppercase tracking-widest text-neutral-600",children:[(0,t.jsx)(n.BookOpen,{size:14,weight:"regular",className:"text-neutral-400"}),e.duration,e.programType&&(0,t.jsx)("span",{className:"ml-2 px-2 py-0.5 rounded-sm bg-neutral-100 text-neutral-500 group-hover:bg-primary/5 group-hover:text-primary transition-colors",children:e.programType})]}),(r=(0,o.getTuitionFee)(e.degreeLevel,(0,o.mapSchoolToTuitionField)(e.school?.slug||"technology")),a=(0,o.calculateDiscountedFee)(r),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5 px-3 py-1.5 rounded-sm border border-neutral-100 text-neutral-900 font-bold text-[10px] uppercase tracking-widest",children:["€",r," ",(0,t.jsx)("span",{className:"text-[9px] text-neutral-500 font-medium lowercase",children:"/ year"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 text-primary rounded-sm font-bold text-[10px] uppercase tracking-widest border border-primary/20 bg-primary/5",children:[(0,t.jsx)(i.Lightning,{size:12,weight:"fill",className:"text-primary"}),"€",a," Early Rate"]})]}))]})]}),(0,t.jsx)("div",{className:"flex flex-col justify-center min-w-[160px]",children:(0,t.jsxs)("button",{onClick:()=>f(e.id),disabled:null!==m,className:"w-full bg-transparent border border-neutral-900 text-neutral-900 font-bold text-[10px] uppercase tracking-widest py-4 rounded-sm hover:bg-neutral-900 hover:text-white transition-all flex items-center justify-center gap-2 group/btn disabled:opacity-50",children:[m===e.id?"Processing...":"Select Programme",m!==e.id&&(0,t.jsx)(s.ArrowRight,{size:14,weight:"bold",className:"group-hover/btn:translate-x-1 transition-transform"})]})})]},e.id)}),0===b.length&&(0,t.jsx)("div",{className:"text-center py-20 text-[10px] font-bold uppercase tracking-widest text-neutral-600 border border-neutral-100 rounded-sm italic bg-neutral-50",children:u||"ALL"!==c?`No ${"ALL"!==c?c.toLowerCase():""} programmes match your search.`:"No academic programmes currently available for application."})]})]})}function d(){let[e,s]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),o=(0,l.useRouter)(),d=(0,a.createClient)();return((0,r.useEffect)(()=>{(async()=>{try{let{data:{user:e}}=await d.auth.getUser();if(!e){console.log("[ApplyPage] No active session, redirecting to login"),o.push("/portal/account/login?redirect=/portal/apply");return}let{data:t,error:r}=await d.from("Course").select(`
                        *,
                        school:School(name, slug)
                    `).order("title");if(r)throw r;s(t||[])}catch(e){console.error("Error fetching courses:",e)}finally{i(!1)}})()},[o,d]),n)?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):(0,t.jsxs)("div",{className:"max-w-4xl",children:[(0,t.jsx)("h1",{className:"text-xl font-black uppercase tracking-tight mb-1 text-neutral-900 leading-none",children:"Select a Programme"}),(0,t.jsx)("p",{className:"text-neutral-600 text-[10px] font-bold uppercase tracking-widest mb-10 leading-relaxed max-w-2xl",children:"Choose the programme you wish to apply for. Multiple active applications are permitted. Ensure you meet the minimum entry requirements listed in the programme details."}),(0,t.jsx)(c,{initialCourses:e})]})}e.s(["default",()=>d],26778)}]);